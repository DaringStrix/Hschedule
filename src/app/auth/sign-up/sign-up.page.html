<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="ion-text-uppercase ion-text-center">sign Up</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-card>
    <ion-card-content>
      <app-logo></app-logo>

      <form [formGroup]="form" (keyup.enter)="registrarSesion()">

        <ion-item class="ion-margin" lines="none">
          <ion-input [formControl]="form.controls.email" type="text" label="Email" labelPlacement="floating"
            placeholder="usuarioX"></ion-input>
        </ion-item>
        <ion-item class="ion-margin" lines="none">
          <ion-input [formControl]="form.controls.password" [type]="type" label="Password" labelPlacement="floating"
            placeholder="passwd"></ion-input>
          <ion-button (click)="viewPasswd()" fill="clear">
            <ion-icon slot="icon-only" [name]=" type =='password' ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>
        <ion-item class="ion-margin" lines="none">
          <ion-input [formControl]="form.controls.reppassword" [type]="type" label="Repaet password"
            labelPlacement="floating" placeholder="passwd"></ion-input>
          <ion-button (click)="viewPasswd()" fill="clear">
            <ion-icon slot="icon-only" [name]=" type =='password' ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>
      </form>
      <ion-button [disabled]="form.invalid || this.form.controls.password.value!=this.form.controls.reppassword.value" class="ion-margin-end" (click)="registrarSesion()" expand="block">
        Registrarse
      </ion-button>
      <ion-button href="login" expand="block" fill="clear" shape="round">
        Login
      </ion-button>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="validate()">
    <ion-card-content>
      <ion-item *ngIf="form.controls.email.errors && form.controls.email.touched" lines="none">
        <ion-text *ngIf="form.controls.email.errors?.['required'] || form.controls.email.errors?.['email']" color="danger">
          Introduzca un email valido.
        </ion-text>
      </ion-item>
      <ion-item *ngIf="form.controls.password.errors && form.controls.password.touched" lines="none">
        <ion-text *ngIf="form.controls.password.errors?.['required']" color="danger">
          Introduzca una contraseña.
        </ion-text>
        <ion-text *ngIf="form.controls.password.errors?.['pattern']" color="danger">
          Introduzca una contraseña con mayúscula, minúscula, número y 8 de longitud como mínimo.
        </ion-text>
      </ion-item>
      <ion-item *ngIf="this.form.controls.password.value!=this.form.controls.reppassword.value" lines="none">
        <ion-text *ngIf="this.form.controls.password.value!=this.form.controls.reppassword.value" color="danger">
          Las contraseñas no coinciden.
        </ion-text>
      </ion-item>
    </ion-card-content>
  </ion-card>
</ion-content>